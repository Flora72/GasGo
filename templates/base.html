<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="manifest" href="{% static 'manifest.json' %}">
    <meta name="theme-color" content="#D97706">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <title>{% block title %}GasGo{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}"/>
    {% block head %}{% endblock %}
    {% block styles %}{% endblock %}

</head>
<body>
<div class="dashboard">
    <aside class="sidebar">
        <div class="sidebar-top">
            <div class="logo">GasGo</div>
            <div class="user-info">
                <p class="welcome">Welcome, {{ user.first_name|default:"Guest" }} ðŸ‘‹</p>
                <p class="tagline">Your space for safe, fast LPG service.</p>
            </div>
        </div>

        <nav class="sidebar-nav">
            <a href="{% url 'dashboard' %}"><i class="fas fa-home"></i> Dashboard</a>
            <a href="{% url 'my_orders' %}"><i class="fas fa-list"></i> My Orders</a>
            <a href="{% url 'orders' %}"><i class="fas fa-box"></i> Order Now</a>
            <a href="{% url 'track_order' %}"><i class="fas fa-truck"></i> Track Order</a>
            <a href="{% url 'emergency' %}"><i class="fas fa-phone"></i> Emergency</a>
            <a href="{% url 'ussd_access' %}"><i class="fas fa-mobile-alt"></i> USSD Access</a>
            <a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </nav>
        <div class="sidebar-bottom">

        </div>
    </aside>

    <div class="main">
        <header class="topbar">
            <div class="profile">Hi, {{ user.first_name|default:"Guest" }} ðŸ‘‹</div>

            <a href="{% url 'profile' %}" class="topbar-profile-link">
                <div class="topbar-profile-pic">
                    {% if user.profile.profile_image %}
                        <img src="{{ user.profile.profile_image.url }}" alt="{{ user.username }} Profile Picture">
                    {% else %}
                        <i class="fas fa-user-circle"></i>
                    {% endif %}
                </div>
            </a>
        </header>

        {% block content %}

        {% endblock %}
    </div>
</div>

<div id="gasbot-float">
    <button onclick="window.location.href='{% url 'gasbot' %}'" title="Chat with GasBot">
        <i class="fas fa-robot"></i> Ask for help
    </button>
</div>
{% block scripts %}{% endblock %}
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register("{% static 'service-worker.js' %}")
            .then(reg => console.log("GasGo PWA active"))
            .catch(err => console.error("Service Worker error:", err));
    }
</script>

</body>
</html>
